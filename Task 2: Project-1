
"""
Project :- 1
Web Scraper using BeautifulSoup

This program scrapes book details (title, price, availability)
from 'http://books.toscrape.com/' and saves them into a CSV file.
"""

import requests
from bs4 import BeautifulSoup
import csv

def scrape_books(url, output_file="books.csv"):
    try:
        # Send request to website with headers
        headers = {"User-Agent": "Mozilla/5.0"}
        response = requests.get(url, headers=headers)
        response.raise_for_status()  # Raise error if request fails

        # Parse the HTML page
        soup = BeautifulSoup(response.text, "html.parser")

        # Find all book containers
        books = soup.find_all("article", class_="product_pod")

        if not books:
            print("⚠️ No books found. The page structure may have changed.")
            return

        # Open CSV file for writing
        with open(output_file, "w", newline="", encoding="utf-8") as file:
            writer = csv.writer(file)
            writer.writerow(["Title", "Price", "Availability"])  # Header row

            # Loop through each book and extract details
            for book in books:
                title = book.h3.a["title"]
                price = book.find("p", class_="price_color").text
                availability = book.find("p", class_="instock availability").text.strip()

                writer.writerow([title, price, availability])

        print(f"✅ Data scraped successfully and saved to {output_file}")

    except Exception as e:
        print("❌ Error:", e)


# Run scraper
if __name__ == "__main__":
    scrape_books("http://books.toscrape.com/")


How to Run:
pip install requests beautifulsoup4
python web_scraper.py
